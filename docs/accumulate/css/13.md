---
title: CSS:hasï¼ˆï¼‰äº¤äº’å¼æŒ‡å—
sidebar: auto
sidebarDepth: 2
date: 2024-06-06
tags:
    - CSS
---

## å†™åœ¨å‰é¢

æœ¬ç¯‡æ–‡ç« æ˜¯ç¿»è¯‘å­¦ä¹ [åŸæ–‡é“¾æ¥](https://ishadeed.com/article/css-has-guide/#the-previous-sibling-selector)ã€‚æŸ¥çœ‹åŸæ–‡å¯ä»¥æ›´å¥½çš„æŸ¥çœ‹ç›¸åº”çš„å±æ€§æ•ˆæœã€‚

## ä»‹ç»

æˆ‘ä»¬ä¸€ç›´å¸Œæœ›åœ¨ CSS ä¸­èƒ½å¤Ÿæ ¹æ®å…ƒç´ çš„åä»£æ¥è®¾ç½®å…ƒç´ çš„æ ·å¼ã€‚ç›´åˆ°æ‰€æœ‰ä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒ CSS :has() åï¼Œè¿™æ‰å¾—ä»¥å®ç°ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†æ¢è®¨è¿™ä¸ªé—®é¢˜ï¼Œå¹¶å±•ç¤º CSS :has() çš„ä¸€äº›æœ‰è¶£ç”¨ä¾‹ã€‚

### é—®é¢˜

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª figure æ ‡ç­¾ï¼Œå¦‚æœå®ƒæœ‰ä¸€ä¸ª figcaption å­å…ƒç´ ï¼Œæˆ‘ä»¬æƒ³ç»™å®ƒè®¾ç½®ä¸åŒçš„æ ·å¼ã€‚å¦‚ä½•åœ¨ CSS ä¸­å®ç°ï¼Ÿ

```html
<figure>
    <img src="thumb.jpg" alt="" />
    <figcaption>A great looking tart.</figcaption>
</figure>
```

å‚è§ä»¥ä¸‹æ¼”ç¤ºã€‚å°è¯•åˆ‡æ¢â€œæ˜¾ç¤ºæ ‡é¢˜â€ã€‚

[ç‚¹å‡»æŸ¥çœ‹æ•ˆæœ](https://april-tong.com/sycamore-cottage/#/dashboard/cssHas)

å½“æœ‰æ ‡é¢˜æ—¶ï¼Œæˆ‘å¸Œæœ›å›¾å½¢å…·æœ‰ä»¥ä¸‹å†…å®¹ï¼š

-   padding è¾¹è·
-   background èƒŒæ™¯è‰²
-   shadow é˜´å½±

CSS ä¸­å”¯ä¸€å¯èƒ½çš„æ–¹æ³•æ˜¯ç»™ figure èµ‹äºˆä¸€ä¸ªç±»ï¼Œç„¶åä»è¯¥ç±»ä¸­é€‰æ‹© figcaptionã€‚

```vue
<template>
    <div class="figure-wrap">
        <el-checkbox v-model="showCaption">å±•ç¤ºæ ‡é¢˜</el-checkbox>
        <figure :class="[showCaption ? 'with-caption' : '']">
            <img class="img" src="@/assets/images/logo.jpeg" alt="" />
            <figcaption v-if="showCaption">A great looking tart.</figcaption>
        </figure>
    </div>
</template>
<script lang="ts" setup>
    const showCaption = ref(false)
</script>
<style lang="less" scoped>
    .figure-wrap {
        display: flex;
        flex-direction: column;
        align-items: center;
        background-color: #2196f317;
        padding: 1rem;
        border-radius: 8px;
        min-height: 180px;
        .img {
            width: 300px;
            height: 300px;
        }
    }
    figure.with-caption {
        padding: 0.5rem;
        background-color: #fff;
        box-shadow: 0 3px 10px 0 rgba(0, 0, 0, 0.1);
        border-radius: 8px;
    }
</style>
```

### è§£å†³

ä½¿ç”¨ CSS :has() é€‰æ‹©å™¨ï¼Œè¿™æ˜¯å¯èƒ½çš„ã€‚æˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œã€‚è¿™å°±åƒè¯´å¦‚æœ figure åŒ…å« figcaptionï¼Œåˆ™æŒ‰è¯¥æ–¹å¼è®¾ç½®æ ·å¼ã€‚
å½“ figcaption æ˜¾ç¤ºæ—¶ï¼Œfigure å°±ä¼šè®¾ç½®ç›¸åº”æ ·å¼ã€‚

```css
figure:has(figcaption) {
    padding: 0.5rem;
    background-color: #fff;
    box-shadow: 0 3px 10px 0 rgba(0, 0, 0, 0.1);
    border-radius: 8px;
}
```

è¿™åªæ˜¯ç®€å•ä»‹ç»äº†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ CSS :has() è§£å†³çš„é—®é¢˜çš„è¡¨é¢ã€‚

## css é€‰æ‹©å™¨å›é¡¾

åœ¨æ·±å…¥ç ”ç©¶ :has() çš„ä¸€äº›æœ‰è¶£çš„ CSS é€‰æ‹©å™¨ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆå¿«é€Ÿå›é¡¾ä¸€ä¸‹å®ƒä»¬ã€‚

### ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨

è¦é€‰æ‹©å…ƒç´ çš„ä¸‹ä¸€ä¸ªåŒçº§å…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›¸é‚»åŒçº§é€‰æ‹©å™¨ (+)ã€‚

```css
.book {
    opacity: 0.2;
}

.frame + .book {
    opacity: 1;
}
```

### é€šç”¨å…„å¼Ÿé€‰æ‹©å™¨

è¦é€‰æ‹©å…ƒç´ çš„æ‰€æœ‰ä¸‹ä¸€ä¸ªå…„å¼Ÿå…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€šç”¨å…„å¼Ÿé€‰æ‹©å™¨ (~)ã€‚

```css
.book {
    opacity: 0.2;
}

.frame ~ .book {
    opacity: 1;
}
```

### å‰ä¸€ä¸ªå…„å¼Ÿé€‰æ‹©å™¨

ä½¿ç”¨ CSS :has()ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥åˆ©ç”¨ä¸Šè¿°å†…å®¹ï¼Œé€‰æ‹©ä¸€ä¸ªå…ƒç´ çš„å‰ä¸€ä¸ªå…„å¼Ÿå…ƒç´ ã€‚

```css
.book {
    opacity: 0.2;
}

.book:has(+ .frame) {
    opacity: 1;
}
```

åœ¨ä¸Šè¿°å†…å®¹çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ç‰¹å®šå…ƒç´ çš„æ‰€æœ‰å‰é¢çš„å…ƒç´ ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦é€‰æ‹© .frame å…ƒç´ ä¹‹å‰çš„æ‰€æœ‰ .bookã€‚

```css
.book {
    opacity: 0.2;
}

.book:has(~ .frame) {
    opacity: 1;
}
```

### å­ç»„åˆé€‰æ‹©å™¨

**>** é€‰æ‹©å™¨ä»…åœ¨å…ƒç´ æ˜¯ç›´æ¥å­å…ƒç´ æ—¶æ‰é€‰æ‹©è¯¥å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ .section > h1 ä»…å½“ h1 æ˜¯è¯¥èŠ‚çš„ç›´æ¥å­å…ƒç´ æ—¶ï¼Œæ‰ä¼šé€‰æ‹©è¯¥å…ƒç´ ã€‚
ä¾‹å¦‚

```html
<div class="box">
    <div class="book"></div>
    <div class="book"></div>
    <div class="book"></div>
</div>
```

```css
.box > .book {
    opacity: 1;
}
```

### :not ä¼ªç±»

CSS ä¸­çš„ :not() é€‰æ‹©å™¨å¯ç”¨äºä»é€‰æ‹©ä¸­æ’é™¤å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œ.section:not(.featured)ã€‚ä¸‹é¢çš„æ¼”ç¤ºå°±æ˜¯é€‰æ‹©é™¤ .blue ä¹‹å¤–çš„æ‰€æœ‰å…ƒç´ ã€‚

```html
<div class="book"></div>
<div class="book"></div>
<div class="book blue"></div>
<div class="book"></div>
```

```css
.book:not(.blue) {
    opacity: 1;
}
.blue {
    background-color: blue;
}
```

ä»¥ä¸Šå°±æ˜¯é€‰æ‹©å™¨å›é¡¾çš„å…¨éƒ¨å†…å®¹ã€‚

## CSS :has() selectors matching

å­¦ä¹ é˜…è¯» CSS :has() é€‰æ‹©å™¨å¾ˆæœ‰ç”¨ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘å°†ä»‹ç»å‡ ä¸ªç¤ºä¾‹å¹¶å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨å®ƒä»¬ã€‚

### å¸¦å›¾åƒçš„å¡ç‰‡

åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€å¼ å¡ç‰‡ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªå›¾åƒä½œä¸ºå­å…ƒç´ ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ CSS :has() è¿›è¡Œæ£€æŸ¥ã€‚

```html
<div class="card-img-wrap">
    <el-checkbox v-model="showImg">å±•ç¤ºå›¾ç‰‡</el-checkbox>
    <div class="card">
        <img v-if="showImg" src="@/assets/images/login_human.png" alt="" />
        <div class="card-content">
            <span>.card:has(> img)</span>
            <i :class="['iconfont', showImg ? 'icon-success' : 'icon-fail']"></i>
        </div>
    </div>
</div>
```

```css
.card {
    text-align: center;
    .card-content {
        i {
            color: red;
        }
    }
}
.card:has(img) {
    .card-content {
        span {
            font-weight: bold;
            color: #2f91f4;
        }
        i {
            color: green;
        }
    }
}
```

å¦‚æœæˆ‘ä»¬æƒ³è¦ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œåªæœ‰å½“å›¾åƒæ˜¯å¡ç‰‡çš„ç›´æ¥å­å…ƒç´ æ—¶æ‰åŒ¹é…ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿå½“å­˜åœ¨ .card-thumb å…ƒç´ æ—¶ï¼Œå®ƒä¸ä¼šåŒ¹é…ã€‚

```css
.card:has(> img) {
    .card-content {
        span {
            font-weight: bold;
            color: #2f91f4;
        }
        i {
            color: green;
        }
    }
}
```

### ä¸å¸¦å›¾åƒçš„å¡ç‰‡

CSS :has() å¯ä»¥ä¸ :not() é€‰æ‹©å™¨ç»“åˆä½¿ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¡ç‰‡é€‰æ‹©å™¨åªæœ‰åœ¨æ²¡æœ‰å›¾åƒçš„æƒ…å†µä¸‹æ‰ä¼šåŒ¹é…ã€‚

```css
.card:not(:has(img)) {
    .card-content {
        span {
            font-weight: bold;
            color: #2f91f4;
        }
        i {
            color: green;
        }
    }
}
```

### ç›¸é‚»å…„å¼Ÿå’Œ :has

æƒ³è¦é€‰æ‹©.frame åé¢è·Ÿç€.book-purple çš„çš„ .shelfã€‚

```css
.shelf:has(.frame + .book-purple) {
}
```

ä¸¾ä¸€åä¸‰ï¼Œä»¥ä¸‹ç»„åˆä½ éƒ½èƒ½çŸ¥é“ä»€ä¹ˆæ„æ€å—ï¼Ÿ

```css
.shelf:has(.box > .book) {
}
.box: has(.book: nth-last-child(n + 3)) {

}
```

### CSS ä¸­çš„é€»è¾‘è¿ç®—ç¬¦ :has

ä½¿ç”¨ CSS :has()ï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿé€»è¾‘è¿ç®—ç¬¦ï¼Œå¦‚â€œ&&â€å’Œâ€œ||â€ã€‚

-   &&

```css
.shelf:has(.book-purple):has(.book-yellow) {
    outline: dashed 2px deeppink;
}
```

-   ||

```css
.shelf:has(.book-purple, .book-yellow) {
    outline: dashed 2px deeppink;
}
```

## æŸ¥çœ‹ has()é€»è¾‘è¿ç®—ç¬¦å®ç°çš„ç¥å¥‡åŠŸèƒ½

åŠ¨æ€æ”¹å˜èœå•å¸ƒå±€ï¼Œ[æŸ¥çœ‹æ›´å¤š ğŸ”—](https://ishadeed.com/article/css-has-guide/#the-previous-sibling-selector)

![](https://raw.githubusercontent.com/AprilTong/image/master/menu.gif)

## å…¶ä»–

CSS :has() æ˜¯ä¸€é¡¹å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒå¼€å¯äº†è®¸å¤šä»¥å‰ä¸å¯èƒ½å®ç°çš„å¯èƒ½æ€§ã€‚å®ƒç¡®å®èµ‹äºˆäº†æˆ‘ä»¬ CSS è¶…èƒ½åŠ›ï¼æˆ‘å»ºè®®æ‚¨ä»Šå¤©å°±å¼€å§‹ä½¿ç”¨å®ƒå¹¶è¿›è¡Œå°è¯•ã€‚

## å‚è€ƒæ–‡ç« 

-   [:has MDN](https://developer.mozilla.org/zh-CN/docs/Web/CSS/:has)
-   [å¦‚ä½•é€‰æ‹©å…ƒç´ çš„å‰ä¸€ä¸ªå…„å¼Ÿå…ƒç´ ](https://www.stefanjudis.com/snippets/how-to-select-the-previous-sibling/)
-   [ä½¿ç”¨ :has() é€‰æ‹©å™¨æå‡ä½ çš„ CSS æŠ€èƒ½](https://www.smashingmagazine.com/2023/01/level-up-css-skills-has-selector/)
-   [äº†è§£ :hasï¼ŒåŸç”Ÿ CSS çˆ¶é€‰æ‹©å™¨ï¼ˆä»¥åŠæ›´å¤šï¼‰](https://www.smashingmagazine.com/2021/06/has-native-css-parent-selector/)
-   [ä½¿ç”¨ :has() ä½œä¸º CSS çˆ¶é€‰æ‹©å™¨ç­‰ç­‰ï¼‰](https://webkit.org/blog/13096/css-has-pseudo-class/)
