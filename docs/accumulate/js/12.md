---
title: callå’Œapply
sidebar: auto
sidebarDepth: 2
date: 2021-07-08
tags:
    - Javascript
---

## äºŒè€…ç”¨é€”

æ›´æ”¹ this çš„æŒ‡å‘ã€‚
ğŸŒ°ï¼š

```js
var name = 'april'
var boyfriend = {
    name: 'bran',
}
function getName() {
    console.log(this.name)
}
getName() // april,è¿”å›çš„æ˜¯å…¨å±€ç¯å¢ƒä¸‹çš„nameå˜é‡
// å¦‚æœæƒ³è¦è·å–å˜é‡boyfriendçš„nameï¼Œå¯ä»¥æ€ä¹ˆè·å–å‘¢
getName.apply(boyfriend)
getName.call(boyfriend)
```

## call çš„æ¨¡æ‹Ÿå®ç°

é€šè¿‡ä¸Šä¾‹æˆ‘ä»¬å¯ä»¥å‘ç°ï¼š

-   call æ”¹å˜äº† this çš„æŒ‡å‘ï¼ŒæŒ‡å‘åˆ° boyfriend
-   getName å‡½æ•°æ‰§è¡Œäº†

call æ–¹æ³•å…¶ä»–ç‰¹ç‚¹ï¼š

-   call æ–¹æ³•è¿˜èƒ½ç»™å®šå‚æ•°æ‰§è¡Œå‡½æ•°

```js
var name = 'april'
var boyfriend = {
    name: 'bran',
}
function getName(age, height) {
    console.log(this.name)
    console.log(age)
    console.log(height)
}
getName.call(boyfriend, 24, 178)
// bran
// 24
// 178
getName.apply(boyfriend, [24, 178])
// bran
// 24
// 178
```

-   this å‚æ•°å¯ä»¥ä¼  nullï¼Œå½“ä¸º null æ—¶ï¼Œå¸‚å§” window

```js
var name = 'april'

function bar() {
    console.log(this.name)
}

bar.call(null) // april
```

-   å‡½æ•°å¯ä»¥æœ‰è¿”å›å€¼

```js
var person = {
    name: 'april',
}

function bar(height, age) {
    return {
        name: this.name,
        height,
        age,
    }
}

console.log(bar.call(person, 160, 24))
// Object {
//    name: 'april',
//    height: 160,
//    age: 24
// }
```

è‡ªå®šä¹‰å®ç°

```js
Function.prototype.myCall = function(context) {
    context = context || window
    context.fn = this
    let args = []
    for (let i = 1; i < arguments.length; i++) {
        args.push(`arguments[${i}]`)
    }
    // eval() å‡½æ•°ä¼šå°†ä¼ å…¥çš„å­—ç¬¦ä¸²å½“åš JavaScript ä»£ç è¿›è¡Œæ‰§è¡Œã€‚
    let result = eval(`context.fn(${args})`)
    delete context.fn
    return result
}
```

## call å’Œ apply çš„åŒºåˆ«

è°ƒç”¨å‚æ•°çš„ä¸åŒ:

-   call çš„å‚æ•°

1. è°ƒç”¨ call çš„å¯¹è±¡ï¼Œå¿…é¡»æ˜¯ä¸ªå‡½æ•°
2. call çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚Function çš„è°ƒç”¨è€…ï¼Œå°†ä¼šæŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚æœä¸ä¼ ï¼Œé»˜è®¤ä¸ºå…¨å±€å¯¹è±¡ window
3. ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ï¼Œå¯ä»¥æ¥æ”¶ä»»æ„ä¸ªå‚æ•°ï¼Œæ¯ä¸ªå‚æ•°ä¼šæ˜ å°„åˆ°å“åº”ä½ç½®çš„ Function çš„å‚æ•°ä¸Šã€‚

```js
function func(a, b, c) {}

func.call(obj, 1, 2, 3)
// func æ¥æ”¶åˆ°çš„å‚æ•°å®é™…ä¸Šæ˜¯ 1,2,3

func.call(obj, [1, 2, 3])
// func æ¥æ”¶åˆ°çš„å‚æ•°å®é™…ä¸Šæ˜¯ [1,2,3],undefined,undefined
```

-   apply çš„å‚æ•°

1. è°ƒç”¨ call çš„å¯¹è±¡ï¼Œå¿…é¡»æ˜¯ä¸ªå‡½æ•°
2. åªæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œ ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚Function çš„è°ƒç”¨è€…ï¼Œå°†ä¼šæŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚æœä¸ä¼ ï¼Œé»˜è®¤ä¸ºå…¨å±€å¯¹è±¡ window
3. ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¿…é¡»æ˜¯æ•°ç»„æˆ–è€…ç±»æ•°ç»„ï¼Œå®ƒä»¬ä¼šè¢«è½¬æ¢æˆç±»æ•°ç»„ï¼Œä¼ å…¥ Function ä¸­ï¼Œå¹¶ä¸”ä¼šè¢«æ˜ å°„åˆ° Function å¯¹åº”çš„å‚æ•°ä¸Šã€‚è¿™ä¹Ÿæ˜¯ call å’Œ apply ä¹‹é—´ï¼Œå¾ˆé‡è¦çš„ä¸€ä¸ªåŒºåˆ«ã€‚

```js
func.apply(obj, [1, 2, 3])
// func æ¥æ”¶åˆ°çš„å‚æ•°å®é™…ä¸Šæ˜¯ 1,2,3

// ç±»æ•°ç»„
func.apply(obj, {
    0: 1,
    1: 2,
    2: 3,
    length: 3,
})
// func æ¥æ”¶åˆ°çš„å‚æ•°å®é™…ä¸Šæ˜¯ 1,2,3
```

## apply çš„æ¨¡æ‹Ÿå®ç°

```js
Function.prototype.myApply = function(context, arr) {
    context = context || window
    context.fn = this
    let result
    if (!arr) {
        result = context.fn()
    } else {
        let args = []
        for (let i = 0; i < arr.length; i++) {
            args.push(`arr[${i}]`)
        }
        result = eval(`context.fn(${args})`)
    }
    delete context.dn
    return result
}
```

## apply çš„ä¸€äº›ä½¿ç”¨

è·å–æ•°ç»„ä¸­æœ€å¤§çš„ä¸€é¡¹

```js
let array = [3, 1, 15, 12]
let max = Math.max.apply(null, array) // maxå°±æ˜¯15
```

è·å–æ•°ç»„ä¸­æœ€å°çš„ä¸€é¡¹

```js
let array = [3, 1, 15, 12]
let min = Math.min.apply(null, array) // minå°±æ˜¯1
```
